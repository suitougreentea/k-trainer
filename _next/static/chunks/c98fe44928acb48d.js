(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85440,(e,t,s)=>{t.exports=e.r(1893)},31713,e=>{"use strict";var t=e.i(63634),s=e.i(63410),l=e.i(85440),a=e.i(2942);function n(){let{locale:e,setLocale:s}=(0,a.useI18n)();return(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("button",{type:"button",onClick:()=>s("ja"),className:`px-3 py-1.5 rounded transition-colors text-sm font-bold ${"ja"===e?"bg-blue-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:"æ—¥æœ¬èªž"}),(0,t.jsx)("button",{type:"button",onClick:()=>s("en"),className:`px-3 py-1.5 rounded transition-colors text-sm font-bold ${"en"===e?"bg-blue-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:"English"})]})}let r={I:[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]],O:[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]],T:[[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,0,0],[1,1,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],S:[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]]],Z:[[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],J:[[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,0,0,0],[1,1,1,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]]],L:[[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[1,1,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]]},i={I:r.I[0],O:r.O[0],T:r.T[0],S:r.S[0],Z:r.Z[0],J:r.J[0],L:r.L[0]};function o(e,t){return"O"===e?0:"I"===e||"S"===e||"Z"===e?t%2:t}let c=["I","O","T","S","Z","J","L"],d={I:0,O:1,T:2,S:3,Z:4,J:5,L:6},m=["I","O","T","S","Z","J","L"];function x(e){return{verticalSplitGroups:e>>13&7,complexPlacements:e>>10&7,sonicDropReachable:(2&e)!=0,singleDropReachable:(1&e)!=0}}function u(e){let t=e.map(e=>d[e]);return 2401*t[0]+343*t[1]+49*t[2]+7*t[3]+t[4]}class h{buffer=null;indexTable=null;dataRegion=null;async load(e="/precomputed-patterns.pcdb"){let t;if("undefined"!=typeof Deno&&Deno.readFile){let s=e;e.startsWith("/")&&(s=`./public${e}`),t=(await Deno.readFile(s)).buffer}else{let s=await fetch(e);if(!s.ok)throw Error(`Failed to load database: ${s.statusText}`);t=await s.arrayBuffer()}this.buffer=t;let s=new Uint8Array(this.buffer);if("PCDB"!==String.fromCharCode(s[0],s[1],s[2],s[3]))throw Error("Invalid database format");let l=new DataView(this.buffer,0,256);l.getUint32(4,!0);let a=l.getUint32(12,!0),n=l.getUint32(16,!0);this.indexTable=new DataView(this.buffer,a,134456),this.dataRegion=new DataView(this.buffer,n)}getSolutions(e,t={}){if(!this.indexTable||!this.dataRegion)throw Error("Database not loaded");let{dropMode:s="single",sortByQuality:l=!0}=t,a=8*u(e),n=this.indexTable.getUint32(a,!0);if(0===this.indexTable.getUint32(a+4,!0))return null;let r=n,i=this.dataRegion.getUint16(r,!0);r+=2;let o=[];for(let t=0;t<i;t++){let t=x(this.dataRegion.getUint32(r,!0));r+=4;let l=[];for(let e=0;e<5;e++){let e=this.dataRegion.getUint16(r,!0);l.push(function(e){let t=e>>7&15;return t>=8&&(t-=16),{type:m[e>>13&7],rotation:e>>11&3,x:t,y:e>>3&15,usedHold:!1}}(e)),r+=2}("single"===s?t.singleDropReachable:t.sonicDropReachable)&&o.push({placements:l,sequence:e,initialHold:null,quality:t})}return 0===o.length?null:(l&&o.sort((e,t)=>t.quality.verticalSplitGroups!==e.quality.verticalSplitGroups?t.quality.verticalSplitGroups-e.quality.verticalSplitGroups:e.quality.complexPlacements-t.quality.complexPlacements),o)}getSolutionCount(e,t={}){if(!this.indexTable||!this.dataRegion)throw Error("Database not loaded");let{dropMode:s="single"}=t,l=8*u(e),a=this.indexTable.getUint32(l,!0);if(0===this.indexTable.getUint32(l+4,!0))return 0;let n=a,r=this.dataRegion.getUint16(n,!0);n+=2;let i=0;for(let e=0;e<r;e++){let e=x(this.dataRegion.getUint32(n,!0));n+=14,("single"===s?e.singleDropReachable:e.sonicDropReachable)&&i++}return i}hasSolution(e,t={}){return this.getSolutionCount(e,t)>0}}let p=null;async function g(e){p=new h,await p.load(e)}function b(e,t={}){if(!p)throw console.error("Database not loaded"),Error("Database not loaded");return p.getSolutions(e,t)}let f=null,j=!1;async function y(){if(!j||!f)try{if(f=await e.A(54778),"function"!=typeof f.find_perfect_clear_solutions)throw Error("WASM module is not properly initialized");j=!0}catch(e){throw console.error("[WASM INIT] Failed to initialize WASM:",e),e}}function N(e){return({I:0,O:1,T:2,S:3,Z:4,J:5,L:6})[e]}async function v(e,t={}){let{maxSolutions:s=1/0,checkReachability:l="staged",dropMode:a="sonic",useBitboard:n=!1}=t;if(j&&f||await y(),!f)throw Error("WASM module is not initialized");if(5!==e.length)throw Error(`Solver requires exactly 5 minos, got ${e.length}`);let r=new Uint8Array(e.map(N)),i=Number.isFinite(s)?Math.max(1,Math.floor(s)):0xffffffff,o=f.find_perfect_clear_solutions(r,i,+(!1!==l),+("single"!==a),n);return{solutions:o.solutions,stats:o.stats}}function w(e){return{type:e.mino_type,rotation:e.rotation,x:e.x,y:e.y,usedHold:!1}}async function k(e,t={}){let s,{initialHold:l=null,maxSolutions:a=1/0,checkReachability:n="staged",dropMode:r="sonic",includeStats:i=!1,useBitboard:o=!1,useDatabase:c=!1}=t;if(null!==l&&5===e.length){let t=function(e,t){let s=[],l=new Set;for(let a=0;a<32;a++){let n=[],r=[],i=e,o=0;for(let e=0;e<5&&((a&1<<e)!=0&&null!==i?(n.push(i),r.push(!0),i=t[o]):(n.push(t[o]),r.push(!1)),!(++o>5));e++);if(5===n.length){let e=n.join(",");l.has(e)||(l.add(e),s.push({sequence:n,holdFlags:r}))}}return s}(l,e),s=[],d={totalNodes:0,solutionsFound:0,maxDepth:0};for(let i of t){if(s.length>=a)break;let t=a-s.length,m=[];if(c){let e=b(i.sequence,{dropMode:r,sortByQuality:!0});e&&e.length>0&&(m=e.slice(0,t),d.totalNodes+=0,d.maxDepth=Math.max(d.maxDepth,5))}else{let{solutions:e,stats:s}=await v(i.sequence,{maxSolutions:t,checkReachability:n,dropMode:r,useBitboard:o});d.totalNodes+=s.total_nodes,d.maxDepth=Math.max(d.maxDepth,s.max_depth_reached),m=e.map(e=>({placements:e.placements.map(w),sequence:i.sequence,initialHold:null}))}for(let t of m){if(s.length>=a)break;let n=function(e,t,s,l){return{placements:e.placements.map((e,s)=>({...e,usedHold:t.holdFlags[s]})),sequence:[...s],initialHold:l}}(t,i,e,l);s.push(n)}}return(d.solutionsFound=s.length,await S(s),i)?{solutions:s,stats:d}:s}if(c){let t=b(e,{dropMode:r,sortByQuality:!0});if(t&&t.length>0){if(s=t.slice(0,a),i){let e={totalNodes:0,solutionsFound:s.length,maxDepth:5};return{solutions:s,stats:e}}return s}return(s=[],i)?{solutions:s,stats:{totalNodes:0,solutionsFound:0,maxDepth:0}}:s}let{solutions:d,stats:m}=await v(e,{maxSolutions:a,checkReachability:n,dropMode:r,useBitboard:o});return(s=d.map(t=>({placements:t.placements.map(w),sequence:e,initialHold:null})),await S(s),i)?{solutions:s,stats:{totalNodes:m.total_nodes,solutionsFound:m.solutions_found,maxDepth:m.max_depth_reached}}:s}async function z(e){if(j&&f||await y(),!f)throw Error("WASM module is not initialized");return f.evaluate_solution_quality_wasm(e)}async function S(e){j&&f||await y();let t=await Promise.all(e.map(e=>z({placements:e.placements.map(e=>({mino_type:e.type,x:e.x,y:e.y,rotation:e.rotation,used_hold:e.usedHold})),sequence:e.sequence,initial_hold:e.initialHold}))),s=e.map((e,t)=>t);s.sort((e,s)=>{let l=t[e],a=t[s];return a.vertical_split_groups!==l.vertical_split_groups?a.vertical_split_groups-l.vertical_split_groups:l.needs_complex_placement-a.needs_complex_placement});let l=s.map(t=>e[t]);e.splice(0,e.length,...l)}let C="k-trainer-bookmarks",T="k-trainer-tags",D={I:"bg-red-500",O:"bg-yellow-500",T:"bg-cyan-500",S:"bg-pink-500",Z:"bg-green-500",J:"bg-blue-500",L:"bg-orange-500",empty:"bg-zinc-800"},F={I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],O:[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],T:[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],S:[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],Z:[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],J:[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],L:[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]]},_=({type:e,size:s="normal"})=>{let l,a,n,r,i=F[e],o="small"===s?"w-3 h-3":"w-5 h-5",c=(l=4,a=-1,n=4,r=-1,i.forEach((e,t)=>{e.forEach((e,s)=>{e&&(l=Math.min(l,t),a=Math.max(a,t),n=Math.min(n,s),r=Math.max(r,s))})}),{minRow:l,maxRow:a,minCol:n,maxCol:r}),d=i.slice(c.minRow,c.maxRow+1).map(e=>e.slice(c.minCol,c.maxCol+1)),m=d[0].length;return(0,t.jsx)("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${m}, minmax(0, 1fr))`},children:d.flat().map((s,l)=>(0,t.jsx)("div",{className:`${o} ${s?D[e]:"bg-transparent"} ${s?"border border-black/20":""}`},l))})},I=e=>"empty"===e?0:["I","O","T","S","Z","J","L"].indexOf(e)+1,q=e=>0===e?"empty":["I","O","T","S","Z","J","L"][e-1]||"empty";function $(){var e;let d,m=(0,l.useSearchParams)(),x=(0,l.useRouter)(),{t:u}=(0,a.useI18n)(),[h,p]=(0,s.useState)([]),[f,j]=(0,s.useState)(null),[N,v]=(0,s.useState)([]),[w,z]=(0,s.useState)(0),[S,F]=(0,s.useState)([]),[$,P]=(0,s.useState)(0),[M,O]=(0,s.useState)(!1),[G,J]=(0,s.useState)(""),[R,E]=(0,s.useState)(""),[L,U]=(0,s.useState)(!1),[A,Z]=(0,s.useState)(!1),[B,H]=(0,s.useState)("random"),[W,Q]=(0,s.useState)(""),[V,K]=(0,s.useState)(""),[X,Y]=(0,s.useState)("hard"),[ee,et]=(0,s.useState)(!0),[es,el]=(0,s.useState)("staged"),[ea,en]=(0,s.useState)("sonic"),[er,ei]=(0,s.useState)(!1),{bookmarks:eo,tags:ec,addBookmark:ed,deleteBookmark:em,clearBookmarks:ex,addTag:eu,deleteTag:eh,renameTag:ep,changeTagColor:eg,addTagToBookmark:eb,removeTagFromBookmark:ef}=function(){let{t:e}=(0,a.useI18n)(),t=[{id:"default-all",name:e.common.all,color:"gray",isDefault:!0}],[l,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(t);(0,s.useEffect)(()=>{try{let e=localStorage.getItem(C);if(e){let t=JSON.parse(e).map(e=>({...e,tags:e.tags||[]}));n(t)}let s=localStorage.getItem(T);if(s){let e=JSON.parse(s).filter(e=>!e.isDefault);i([...t,...e])}}catch(e){console.error("Failed to load bookmarks:",e)}},[]);let o=e=>{try{localStorage.setItem(C,JSON.stringify(e)),n(e)}catch(e){console.error("Failed to save bookmarks:",e)}},c=e=>{try{let t=e.filter(e=>!e.isDefault);localStorage.setItem(T,JSON.stringify(t)),i(e)}catch(e){console.error("Failed to save tags:",e)}};return{bookmarks:l,tags:r,addBookmark:(e,t,s,a,n=[])=>{try{let r,i=l.find(e=>{var l,a;return l=e.sequence,a=e.holdPiece,l.length===t.length&&a===s&&l.every((e,s)=>e===t[s])});if(i)r=l.map(t=>t.id===i.id?{...t,name:e,solution:a,tags:n}:t);else{let i={id:Date.now().toString(),name:e,sequence:t,holdPiece:s,solution:a,createdAt:Date.now(),tags:n};r=[...l,i]}return o(r),!0}catch(e){return console.error("Failed to add bookmark:",e),!1}},deleteBookmark:e=>{o(l.filter(t=>t.id!==e))},clearBookmarks:()=>{o([])},addTag:(e,t)=>{try{let s={id:`tag-${Date.now()}`,name:e,color:t,isDefault:!1},l=[...r,s];return c(l),!0}catch(e){return console.error("Failed to add tag:",e),!1}},deleteTag:e=>{let t=r.find(t=>t.id===e);if(t?.isDefault)return console.error("Cannot delete default tag"),!1;try{let t=r.filter(t=>t.id!==e);c(t);let s=l.map(t=>({...t,tags:t.tags.filter(t=>t!==e)}));return o(s),!0}catch(e){return console.error("Failed to delete tag:",e),!1}},renameTag:(e,t)=>{let s=r.find(t=>t.id===e);if(s?.isDefault)return console.error("Cannot rename default tag"),!1;try{let s=r.map(s=>s.id===e?{...s,name:t}:s);return c(s),!0}catch(e){return console.error("Failed to rename tag:",e),!1}},changeTagColor:(e,t)=>{let s=r.find(t=>t.id===e);if(s?.isDefault)return console.error("Cannot change default tag color"),!1;try{let s=r.map(s=>s.id===e?{...s,color:t}:s);return c(s),!0}catch(e){return console.error("Failed to change tag color:",e),!1}},addTagToBookmark:(e,t)=>{try{let s=l.map(s=>s.id!==e||s.tags.includes(t)?s:{...s,tags:[...s.tags,t]});return o(s),!0}catch(e){return console.error("Failed to add tag to bookmark:",e),!1}},removeTagFromBookmark:(e,t)=>{try{let s=l.map(s=>s.id===e?{...s,tags:s.tags.filter(e=>e!==t)}:s);return o(s),!0}catch(e){return console.error("Failed to remove tag from bookmark:",e),!1}}}}(),[ej,ey]=(0,s.useState)(!1),[eN,ev]=(0,s.useState)(!1),[ew,ek]=(0,s.useState)([]),[ez,eS]=(0,s.useState)("default-all"),[eC,eT]=(0,s.useState)(!1),[eD,eF]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{J(u.common.initializing),await y(),U(!0);try{J(u.common.loadingDatabase),await g(),Z(!0)}catch(e){console.warn("DB load failed, solver mode:",e),Z(!1)}finally{e$(!0)}}catch(e){E("WASMã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: "+(e instanceof Error?e.message:String(e))),e$(!0)}})()},[]);let[e_,eI]=(0,s.useState)(!0),[eq,e$]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!L||!e_||!eq)return;let e=m.get("hold"),t=m.get("next"),s=m.get("mode"),l=m.get("reach"),a=m.get("drop"),n=m.get("bitboard"),r=m.get("db"),i=m.get("difficulty");if("manual"===s?H("manual"):H("random"),"easy"===i?Y("easy"):Y("hard"),"false"===r?et(!1):et(!0),"false"===l?el(!1):el("staged"),"single"===a?en("single"):en("sonic"),"true"===n?ei(!0):ei(!1),t){let l=eM(t);5===l.length&&("manual"===s&&(K(t.toUpperCase()),e&&eM(e).length<=1&&Q(e.toUpperCase())),setTimeout(()=>{eO(l,e?eM(e)[0]:null)},100))}eI(!1)},[L,e_,eq]);let eP=(e,t,s,l,a,n,r,i)=>{let o=new URLSearchParams;5===e.length&&(o.set("next",e.join("")),t&&o.set("hold",t),"manual"===s&&o.set("mode","manual")),"staged"!==l&&o.set("reach",String(l)),"sonic"!==a&&o.set("drop",a),!1!==n&&o.set("bitboard",String(n)),!0!==r&&o.set("db",String(r)),"hard"!==i&&o.set("difficulty",i);let c=o.toString()?`?${o.toString()}`:"/";x.push(c,{scroll:!1})},eM=e=>{let t=["I","O","T","S","Z","J","L"];return e.toUpperCase().replace(/[^IOTSZJL]/g,"").split("").filter(e=>t.includes(e))},eO=async(e,t)=>{if(L){O(!0),J("å•é¡Œã‚’ç”Ÿæˆä¸­..."),E(""),await new Promise(e=>setTimeout(e,0));try{let s;if(ee&&A&&!t){let t=b(e,{dropMode:ea,sortByQuality:!0});if(t&&t.length>0)s=t;else{E(u.error.noSequenceInDatabase),O(!1);return}}else s=await k(e,{initialHold:t,checkReachability:es,dropMode:ea,useBitboard:er,useDatabase:ee&&A});if(s.length>0){let l=s.map(e=>e.placements);v(l),z(0),p(e),j(t),F(l[0]),P(0)}else E(u.error.noSolution)}catch(e){E("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: "+(e instanceof Error?e.message:String(e)))}finally{O(!1)}}},eG=async()=>{if(!L)return void E(u.error.wasmInit);O(!0),J(u.problemGenerator.generating),E(""),await new Promise(e=>setTimeout(e,0));try{let e=0,t=[],s=null,l=[];if("manual"===B){let e,a=eM(W),n=eM(V);if(5!==n.length){E(u.error.nextRequired.replace("{count}",n.length.toString())),O(!1);return}if(a.length>1){E(u.error.holdRequired.replace("{count}",a.length.toString())),O(!1);return}if(t=n,s=1===a.length?a[0]:null,ee&&A&&!s){let s=b(t,{dropMode:ea,sortByQuality:!0});if(s&&s.length>0)e=s;else{E(u.error.noSequenceInDatabase),O(!1);return}}else e=await k(t,{initialHold:s,checkReachability:es,dropMode:ea,useBitboard:er,useDatabase:ee&&A});if(e.length>0){let t=e.map(e=>e.placements);v(t),z(0),l=t[0]}else E(u.error.noSolution)}else{for(;0===l.length&&e<10;){let a;e++,J(`${u.problemGenerator.generating} (${e}${u.problemGenerator.attempt})`),e%5==0&&await new Promise(e=>setTimeout(e,0));let{sequence:n,hold:r}=function(e="hard"){let t=function(e="hard"){let t=[..."easy"===e?["J","J","L","L"]:["Z","Z","S","S"]],s=[];for(let l=0;l<10;l++){let{mino:l,newHistory:a}=function(e,t="hard"){let s=null,l="easy"===t?c.filter(e=>"S"!==e&&"Z"!==e):c;for(let t=0;t<6;t++){let a=Math.floor(Math.random()*l.length),n=l[a];if(!e.includes(n)){s=n;break}5===t&&(s=n)}let a=[s,...e.slice(0,3)];return{mino:s,newHistory:a}}(t,e);s.push(l),t=a}return s}(e),s=t[4];return{sequence:t.slice(5,10),hold:s}}(X);if(t=n,s=r,ee&&A&&!s){let e=b(t,{dropMode:ea,sortByQuality:!0});if(!e||!(e.length>0))continue;a=e}else a=await k(t,{initialHold:s,checkReachability:es,dropMode:ea,useBitboard:er,useDatabase:ee&&A});if(a.length>0){let e=a.map(e=>e.placements);v(e),z(0),l=e[0]}}0===l.length&&E(u.error.attempts)}l.length>0&&(p(t),j(s),F(l),P(0),eP(t,s,B,es,ea,er,ee,X))}catch(e){E("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: "+(e instanceof Error?e.message:String(e)))}finally{O(!1)}},eJ=S.length>0?(e=S.slice(0,$),d=Array(10).fill(null).map(()=>[,,,,,].fill("empty")),e.forEach((e,t)=>{t>0&&(d=(function(e){let t=[];for(let s=0;s<10;s++){let l=e[s];l.every(e=>0!==e)||t.push([...l])}let s=10-t.length;for(let e=0;e<s;e++)t.unshift([,,,,,].fill(0));return t})(d.map(e=>e.map(I))).map(e=>e.map(q)));let s=e.type;(function(e,t,s){if(s){let e=o(s,t);return r[s][e]}for(let s of Object.keys(i))if(JSON.stringify(i[s])===JSON.stringify(e)){let e=o(s,t);return r[s][e]}return e})(i[s],e.rotation,s).forEach((t,l)=>{t.forEach((t,a)=>{if(t){let t=e.y+l,n=e.x+a;t>=0&&t<10&&n>=0&&n<5&&(d[t][n]=s)}})})}),d):Array(10).fill(null).map(()=>[,,,,,].fill("empty")),eR=(()=>{let e=f;for(let t=0;t<$;t++)S[t].usedHold&&(e=h[t]);return e})(),eE=h.slice($),eL=async()=>{let e=globalThis.location.href;try{await globalThis.navigator.clipboard.writeText(e),alert(u.bookmark.urlCopied)}catch(e){console.error("Failed to copy to clipboard:",e),alert(u.bookmark.urlCopyFailed)}},eU=eo.filter(e=>"default-all"===ez||e.tags.includes(ez)),eA=e=>({gray:"bg-gray-600",red:"bg-red-600",orange:"bg-orange-600",yellow:"bg-yellow-600",green:"bg-green-600",blue:"bg-blue-600",purple:"bg-purple-600",pink:"bg-pink-600"})[e]||"bg-gray-600",eZ=e=>"default-all"===e.id?u.common.all:e.name,eB=async e=>{p(e.sequence),j(e.holdPiece),F(e.solution),P(0);try{O(!0);let t=[];if(!e.holdPiece&&ee&&A){let s=b(e.sequence);s&&s.length>0&&(t=s)}if(0===t.length&&(t=await k(e.sequence,{initialHold:e.holdPiece,checkReachability:es,dropMode:ea,useBitboard:er,useDatabase:ee&&A})),t.length>0){let s=t.map(e=>e.placements);v(s);let l=s.findIndex(t=>t.length===e.solution.length&&t.every((t,s)=>t.type===e.solution[s].type&&t.x===e.solution[s].x&&t.y===e.solution[s].y&&t.rotation===e.solution[s].rotation));z(-1!==l?l:0)}else v([e.solution]),z(0)}catch(t){console.error("Failed to recalculate solutions:",t),v([e.solution]),z(0)}finally{O(!1)}eP(e.sequence,e.holdPiece,B,es,ea,er,ee,X)};return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-900 font-sans p-2 sm:p-4 relative flex",children:[(!L||!eq)&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 p-6 sm:p-8 rounded-lg border-2 border-zinc-700 text-center max-w-md mx-4",children:[(0,t.jsx)("div",{className:"text-white text-lg sm:text-xl mb-4",children:G||u.common.initializing}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]})}),eN&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-zinc-800 p-6 rounded-lg border-2 border-zinc-700 max-w-md w-full",children:[(0,t.jsx)("h3",{className:"text-white text-lg font-bold mb-4",children:u.bookmark.selectTags}),(0,t.jsxs)("div",{className:"mb-4 max-h-60 overflow-y-auto",children:[ec.filter(e=>!e.isDefault).map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-zinc-700 rounded cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:ew.includes(e.id),onChange:()=>{var t;return t=e.id,void(ew.includes(t)?ek(ew.filter(e=>e!==t)):ek([...ew,t]))},className:"w-4 h-4"}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs ${eA(e.color)} text-white`,children:eZ(e)})]},e.id)),0===ec.filter(e=>!e.isDefault).length&&(0,t.jsx)("div",{className:"text-zinc-500 text-sm text-center py-4",children:u.bookmark.noTags})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{if(0===S.length)return;let e=f?`[${f}] ${h.join("")}`:h.join(""),t=new Date().toLocaleString("ja-JP",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});ed(`${e} (${t})`,h,f,S,ew)?(alert(u.bookmark.saved),ev(!1),ek([])):alert(u.bookmark.failed)},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors",children:u.common.save}),(0,t.jsx)("button",{type:"button",onClick:()=>{ev(!1),ek([])},className:"flex-1 px-4 py-2 bg-zinc-600 hover:bg-zinc-700 text-white rounded transition-colors",children:u.common.cancel})]})]})}),(0,t.jsx)("div",{className:`fixed top-0 right-0 h-full bg-zinc-800 border-l-2 border-zinc-700 transition-transform duration-300 z-40 ${ej?"translate-x-0":"translate-x-full"} w-80 sm:w-96 overflow-y-auto`,children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4 sticky top-0 bg-zinc-800 pb-2 border-b border-zinc-700",children:[(0,t.jsx)("h3",{className:"text-white text-lg font-bold",children:u.bookmark.title}),(0,t.jsx)("button",{type:"button",onClick:()=>ey(!1),className:"px-3 py-1.5 bg-zinc-600 hover:bg-zinc-700 text-white text-sm rounded transition-colors",children:u.bookmark.close})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"text-white text-sm font-bold mb-2",children:u.bookmark.filterByTag}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:ec.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>eS(e.id),className:`px-2 py-1 rounded text-xs transition-all ${ez===e.id?`${eA(e.color)} text-white font-bold`:"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:[eZ(e),"default-all"!==e.id&&(0,t.jsxs)("span",{className:"ml-1 text-xs",children:["(",eo.filter(t=>t.tags.includes(e.id)).length,")"]}),"default-all"===e.id&&(0,t.jsxs)("span",{className:"ml-1 text-xs",children:["(",eo.length,")"]})]},e.id))})]}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("button",{type:"button",onClick:()=>eT(!eC),className:"w-full px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded transition-colors",children:eC?u.bookmark.closeTagManagement:u.bookmark.tagManagement})}),eC&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-zinc-700 rounded-lg border border-zinc-600",children:[(0,t.jsx)("div",{className:"text-white text-sm font-bold mb-3",children:u.bookmark.manageTagsTitle}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("button",{type:"button",onClick:()=>{let e=prompt(u.bookmark.enterTagName);if(e&&e.trim()){let t=["red","orange","yellow","green","blue","purple","pink"],s=t[Math.floor(Math.random()*t.length)];eu(e.trim(),s)}},className:"w-full px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-xs rounded transition-colors",children:u.bookmark.addNewTag})}),(0,t.jsxs)("div",{className:"space-y-2",children:[ec.filter(e=>!e.isDefault).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-zinc-800 rounded",children:[(0,t.jsx)("span",{className:`flex-1 px-2 py-1 rounded text-xs ${eA(e.color)} text-white`,children:eZ(e)}),(0,t.jsx)("button",{type:"button",onClick:()=>{let t=prompt(u.bookmark.enterNewName,e.name);t&&t.trim()&&ep(e.id,t.trim())},className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",title:u.bookmark.rename,children:"âœŽ"}),(0,t.jsx)("button",{type:"button",onClick:()=>{confirm(u.bookmark.confirmDeleteTag.replace("{name}",e.name))&&eh(e.id)},className:"px-2 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition-colors",title:u.common.delete,children:"âœ•"})]},e.id)),0===ec.filter(e=>!e.isDefault).length&&(0,t.jsx)("div",{className:"text-zinc-500 text-xs text-center py-2",children:u.bookmark.noCustomTags})]})]}),0===eU.length?(0,t.jsx)("div",{className:"text-zinc-500 text-center py-12 text-sm",children:"default-all"===ez?u.bookmark.empty:u.bookmark.emptyFiltered}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mb-3 flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:()=>{confirm(u.bookmark.confirmDeleteAll)&&ex()},className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition-colors",children:u.bookmark.deleteAll})}),(0,t.jsx)("div",{className:"space-y-2",children:eU.map(e=>(0,t.jsx)("div",{className:"bg-zinc-700 p-3 rounded-lg border border-zinc-600 hover:border-zinc-500 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-white font-bold text-sm break-words",children:e.name}),(0,t.jsxs)("div",{className:"text-zinc-400 text-xs font-mono",children:[e.holdPiece&&`[${e.holdPiece}] `,e.sequence.join("")]}),(0,t.jsx)("div",{className:"text-zinc-500 text-xs",children:new Date(e.createdAt).toLocaleString("ja-JP")}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 items-center",children:[e.tags.map(s=>{let l=ec.find(e=>e.id===s);return l?(0,t.jsxs)("span",{className:`px-2 py-0.5 rounded text-xs ${eA(l.color)} text-white flex items-center gap-1`,children:[eZ(l),(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),ef(e.id,s)},className:"hover:text-red-300",title:u.bookmark.removeTag,children:"âœ•"})]},s):null}),(0,t.jsx)("button",{type:"button",onClick:()=>eF(eD===e.id?null:e.id),className:"px-2 py-0.5 bg-zinc-600 hover:bg-zinc-500 text-white text-xs rounded transition-colors",title:u.bookmark.addTagTooltip,children:"ï¼‹"})]}),eD===e.id&&(0,t.jsxs)("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-600",children:[(0,t.jsxs)("div",{className:"text-white text-xs mb-2",children:[u.bookmark.addTag,":"]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[ec.filter(t=>!t.isDefault&&!e.tags.includes(t.id)).map(s=>(0,t.jsx)("button",{type:"button",onClick:()=>{eb(e.id,s.id),eF(null)},className:`px-2 py-1 rounded text-xs ${eA(s.color)} text-white hover:opacity-80 transition-opacity`,children:eZ(s)},s.id)),0===ec.filter(t=>!t.isDefault&&!e.tags.includes(t.id)).length&&(0,t.jsx)("div",{className:"text-zinc-500 text-xs",children:u.bookmark.noTagsToAdd})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>eB(e),className:"flex-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:u.bookmark.load}),(0,t.jsx)("button",{type:"button",onClick:()=>{confirm(u.bookmark.confirmDelete.replace("{name}",e.name))&&em(e.id)},className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors",children:u.common.delete})]})]})},e.id))})]})]})}),ej&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>ey(!1)}),(0,t.jsxs)("div",{className:"flex-1 max-w-6xl mx-auto w-full",children:[(M||R)&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-zinc-800 p-6 sm:p-8 rounded-lg border-2 border-zinc-700 text-center max-w-md mx-4",children:R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-red-500 text-lg sm:text-xl mb-4",children:R}),(0,t.jsx)("button",{type:"button",onClick:()=>E(""),className:"px-6 py-3 bg-zinc-600 hover:bg-zinc-700 text-white rounded-lg font-bold transition-colors",children:u.common.close})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-white text-lg sm:text-xl mb-4",children:G}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]})})}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsx)("div",{className:"flex justify-end mb-3",children:(0,t.jsx)(n,{})}),(0,t.jsxs)("div",{className:"text-center mb-3 sm:mb-4",children:[(0,t.jsx)("h1",{className:"text-white text-xl sm:text-2xl font-bold mb-1 sm:mb-2",children:u.common.appTitle}),(0,t.jsx)("div",{className:"text-zinc-400 text-xs sm:text-sm",children:S.length>0?(0,t.jsxs)(t.Fragment,{children:[u.game.step,": ",$," / ",S.length,$===S.length&&(0,t.jsxs)("span",{className:"ml-2 sm:ml-4 text-green-500 font-bold",children:["âœ“ ",u.game.complete]})]}):(0,t.jsx)("span",{children:u.game.clickToStart})})]}),(0,t.jsxs)("div",{className:"flex gap-2 sm:gap-4 lg:gap-6 items-start justify-center mb-3 sm:mb-4 overflow-x-auto",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)("div",{className:"bg-zinc-800 p-2 sm:p-3 lg:p-4 rounded-lg border-2 border-zinc-700 w-20 sm:w-24 lg:w-28",children:[(0,t.jsx)("h2",{className:"text-white text-xs sm:text-sm font-bold mb-2 sm:mb-3 text-center",children:u.game.hold}),(0,t.jsx)("div",{className:"h-14 sm:h-16 lg:h-20 flex items-center justify-center",children:eR?(0,t.jsx)(_,{type:eR,size:"small"}):(0,t.jsx)("div",{className:"text-zinc-500 text-xs sm:text-sm text-center",children:"-"})})]})}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"bg-black p-1 sm:p-2 rounded-lg border-2 sm:border-4 border-zinc-700",children:(0,t.jsx)("div",{className:"grid grid-rows-10 gap-0.5",children:eJ.map((e,s)=>(0,t.jsx)("div",{className:"flex gap-0.5",children:e.map((e,s)=>(0,t.jsx)("div",{className:`w-6 h-6 sm:w-10 sm:h-10 lg:w-12 lg:h-12 ${D[e]} ${"empty"===e?"border border-zinc-700":"border border-black"}`},s))},s))})})}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)("div",{className:"bg-zinc-800 p-2 sm:p-3 lg:p-4 rounded-lg border-2 border-zinc-700 w-20 sm:w-24 lg:w-28",children:[(0,t.jsx)("h2",{className:"text-white text-xs sm:text-sm font-bold mb-2 sm:mb-3 text-center",children:u.game.nextLabel}),(0,t.jsx)("div",{className:"flex flex-col gap-1 sm:gap-1.5 lg:gap-2",children:[0,1,2,3,4].map(e=>(0,t.jsx)("div",{className:"h-12 sm:h-14 lg:h-16 flex items-center justify-center",children:eE[e]?(0,t.jsx)(_,{type:eE[e],size:"small"}):(0,t.jsx)("div",{className:"text-zinc-500 text-xs text-center",children:"-"})},e))})]})})]}),(0,t.jsx)("div",{className:"bg-zinc-800 p-3 rounded-lg border-2 border-zinc-700 mb-3 sm:mb-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{if(w>0){let e=w-1;z(e),F(N[e]),P(0)}},disabled:0===w||0===N.length,className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 active:bg-purple-800 disabled:bg-zinc-700 disabled:text-zinc-500 text-white rounded-lg font-bold transition-colors text-sm",children:u.game.prevSolution}),(0,t.jsx)("span",{className:"text-white text-sm font-bold",children:N.length>0?(0,t.jsxs)(t.Fragment,{children:[u.game.solution," ",w+1," / ",N.length]}):(0,t.jsxs)(t.Fragment,{children:[u.game.solution," 0 / 0"]})}),(0,t.jsx)("button",{type:"button",onClick:()=>{if(w<N.length-1){let e=w+1;z(e),F(N[e]),P(0)}},disabled:w>=N.length-1||0===N.length,className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 active:bg-purple-800 disabled:bg-zinc-700 disabled:text-zinc-500 text-white rounded-lg font-bold transition-colors text-sm",children:u.game.nextSolution})]})}),(0,t.jsxs)("div",{className:"flex gap-2 sm:gap-3 lg:gap-4 items-stretch sm:items-center justify-center mb-3 sm:mb-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{$>0&&P($-1)},disabled:0===$,className:"flex-1 sm:flex-none px-4 sm:px-5 lg:px-6 py-3 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 disabled:bg-zinc-700 disabled:text-zinc-500 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",children:u.game.prev}),(0,t.jsx)("button",{type:"button",onClick:()=>{P(0)},disabled:0===$,className:"px-3 sm:px-4 py-3 bg-zinc-700 hover:bg-zinc-600 active:bg-zinc-500 disabled:bg-zinc-800 disabled:text-zinc-600 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",children:u.common.reset}),(0,t.jsx)("button",{type:"button",onClick:()=>{$<S.length&&P($+1)},disabled:$>=S.length,className:"flex-1 sm:flex-none px-4 sm:px-5 lg:px-6 py-3 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 disabled:bg-zinc-700 disabled:text-zinc-500 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",children:u.game.next})]}),(0,t.jsxs)("details",{className:"bg-zinc-800 p-3 sm:p-4 lg:p-5 rounded-lg border-2 border-zinc-700 mb-3 sm:mb-4",children:[(0,t.jsx)("summary",{className:"text-white text-sm sm:text-base font-bold cursor-pointer hover:text-zinc-300 transition-colors select-none",children:u.options.title}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:gap-4 mt-3 sm:mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-white text-sm font-bold mb-2",children:[u.problemGenerator.generationMode,":"]}),(0,t.jsxs)("div",{className:"flex gap-3 sm:gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"random",checked:"random"===B,onChange:e=>H(e.target.value),className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-white text-sm sm:text-base",children:u.problemGenerator.random})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"manual",checked:"manual"===B,onChange:e=>H(e.target.value),className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-white text-sm sm:text-base",children:u.problemGenerator.manual})]})]})]}),"random"===B&&(0,t.jsxs)("div",{className:"border-t border-zinc-700 pt-3",children:[(0,t.jsxs)("div",{className:"text-white text-sm font-bold mb-2",children:[u.problemGenerator.difficulty,":"]}),(0,t.jsxs)("div",{className:"flex gap-3 sm:gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"easy",checked:"easy"===X,onChange:e=>Y(e.target.value),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm sm:text-base",children:[u.problemGenerator.easy,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.problemGenerator.excludeSZ})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"hard",checked:"hard"===X,onChange:e=>Y(e.target.value),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm sm:text-base",children:[u.problemGenerator.hard,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.problemGenerator.all7Types})]})]})]})]}),"manual"===B&&(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-white text-xs sm:text-sm mb-1 block",children:u.problemGenerator.holdInput}),(0,t.jsx)("input",{type:"text",value:W,onChange:e=>Q(e.target.value),placeholder:u.problemGenerator.holdPlaceholder,className:"w-full px-3 py-2 bg-zinc-700 text-white rounded border border-zinc-600 focus:border-blue-500 focus:outline-none text-sm sm:text-base uppercase",maxLength:1})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-white text-xs sm:text-sm mb-1 block",children:u.problemGenerator.nextInput}),(0,t.jsx)("input",{type:"text",value:V,onChange:e=>K(e.target.value),placeholder:u.problemGenerator.nextPlaceholder,className:"w-full px-3 py-2 bg-zinc-700 text-white rounded border border-zinc-600 focus:border-blue-500 focus:outline-none text-sm sm:text-base uppercase font-mono",maxLength:10})]})]}),"manual"===B&&(0,t.jsx)("div",{className:"text-zinc-400 text-xs",children:u.problemGenerator.validMinos}),(0,t.jsxs)("div",{className:"border-t border-zinc-700 pt-3",children:[(0,t.jsxs)("div",{className:"text-white text-sm font-bold mb-2",children:[u.options.solutionMethod,":"]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"database",checked:!0===ee,onChange:()=>et(!0),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm text-white",children:[u.options.database,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.options.databaseFast})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"solver",checked:!1===ee,onChange:()=>et(!1),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[u.options.solver,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.options.solverHold})]})]})]})})]}),!ee&&(0,t.jsxs)("div",{className:"border-t border-zinc-700 pt-3",children:[(0,t.jsxs)("div",{className:"text-white text-sm font-bold mb-2",children:[u.options.dropMode,":"]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"sonic",checked:"sonic"===ea,onChange:()=>en("sonic"),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[u.options.sonicDrop,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.options.sonicFast})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"single",checked:"single"===ea,onChange:()=>en("single"),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[u.options.singleMove,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.options.singleDebug})]})]})]})})]}),!ee&&(0,t.jsxs)("div",{className:"border-t border-zinc-700 pt-3",children:[(0,t.jsxs)("div",{className:"text-white text-sm font-bold mb-2",children:[u.options.additionalSettings,":"]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"staged",checked:"staged"===es,onChange:()=>el("staged"),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[u.options.staged,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.options.recommended})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"false",checked:!1===es,onChange:()=>el(!1),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[u.options.noCheck,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.options.includesInvalid})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"false",checked:!1===er,onChange:()=>ei(!1),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[u.options.normal,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.options.normalFast})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",value:"true",checked:!0===er,onChange:()=>ei(!0),className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[u.options.bitboard,(0,t.jsx)("span",{className:"text-zinc-400 text-xs ml-2",children:u.options.bitboardExperimental})]})]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 sm:gap-3 justify-center flex-wrap",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{eG()},className:"px-4 sm:px-5 lg:px-6 py-3 bg-green-600 hover:bg-green-700 active:bg-green-800 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",children:"random"===B?u.problemGenerator.newProblem:u.problemGenerator.findSolution}),(0,t.jsxs)("button",{type:"button",onClick:eL,disabled:0===S.length,className:"px-4 sm:px-5 lg:px-6 py-3 bg-orange-600 hover:bg-orange-700 active:bg-orange-800 disabled:bg-zinc-700 disabled:text-zinc-500 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",title:u.bookmark.urlCopied.replace("!",""),children:["ðŸ“‹ ",u.common.share]}),(0,t.jsx)("button",{type:"button",onClick:()=>{if(0===S.length)return void alert(u.bookmark.failed);let e=eo.find(e=>e.sequence.length===h.length&&e.holdPiece===f&&e.sequence.every((e,t)=>e===h[t]));ev(!0),ek(e?e.tags:[])},disabled:0===S.length,className:"px-4 sm:px-5 lg:px-6 py-3 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 disabled:bg-zinc-700 disabled:text-zinc-500 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",title:u.bookmark.title,children:u.bookmark.save}),(0,t.jsx)("button",{type:"button",onClick:()=>ey(!0),className:"px-4 sm:px-5 lg:px-6 py-3 bg-purple-600 hover:bg-purple-700 active:bg-purple-800 text-white rounded-lg font-bold transition-colors text-sm sm:text-base",title:u.bookmark.title,children:eo.length>0?u.bookmark.listWithCount.replace("{count}",eo.length.toString()):u.bookmark.list})]})]})]})]})}function P(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}),children:(0,t.jsx)($,{})})}e.s(["default",()=>P],31713)}]);